**函数**是完成特定任务的**独立程序代码单元**。语法规则定义了函数的结构和使用方式。
一般而言，函数有**执行某些动作**和**找出一个值供某些程序使用**两种功能。
使用函数的优势：
+ 避免编写重复代码。
+ 是程序更加模块化，提高代码可读性。

---

## 01 创建并使用简单函数
```c
#include <stdio.h>
#define NAME "GIGATHINK, INC."
#define ADDRESS "101 Megabuck Plaza"
#define PLACE "Megapolis, CA 94904"
#define WIDTH 40
void starbar(void);  /*函数原型*/
int main(void)
{
    starbar();
    printf("%s\n", NAME);
    printf("%s\n", ADDRESS);
    printf("%s\n", PLACE);
    starbar();       /*函数调用*/    
    return 0;
}
void starbar(void)   /*函数定义*/
{
    int count;    
    for (count = 1; count <= WIDTH; count++)
        putchar('*');
    putchar('\n');
}
```
### （1）函数原型 （函数头）
函数和变量一样，有多种类型。任何程序在使用函数之前都要先声明该**函数的类型**（即**返回值的类型**和**参数的类型**）。因此，在main()函数定义的前面出现了下面的ANSI C风格的函数原型：
```c
void starbar(void);
//函数的返回类型 函数名(参数类型 (参数假名), 参数类型 (参数假名))
```
圆括号代表starbar是一个**函数名**，第一个void是**函数返回值的类型**（void类型表示函数没有返回值），第二个void表明该函数**不带形式参数**。**分号**表明这是在声明函数。
**函数原型**声明了一个函数，并告诉编译器在**别处查找函数的的定义**。

>[!important]
>+ （1）一般而言，函数原型指明了函数**返回值的类型**和**接受的参数及类型**。
>+ （2）函数声明可以放在main函数前面，或里面，但是必须放在**函数调用前面**。
>+ （3）函数原型中的参数假名**不必和函数定义中的形式参数名一致**，也可以**省略**。

### （2）函数调用
调用函数需根据函数的声明。例如
```c
int star(double x, int y);
```
调用时，应该写成：``star(3.2, 7);``

### （3）函数定义 （函数体）
定义函数的格式与main函数（主调函数）一致，不需要加分号！
>[!warning]
>starbar()函数定义中的count变量是**局部变量**，可以在main中定义count变量，它们是重名的**两个不同的变量**。

## 02 使用形式参数定义函数
```c
void show_n_char(char ch, int n);
void show_n_char(char ch, int n)
{
    ......
}
```
在这里，ch和n都是**形式参数**，和main函数中的变量不冲突，属于**局部变量**。
在函数调用中，**实际参数**会赋值给形式参数。

## 03 使用return从函数中返回值
```c
int num(int x, int y)
{
    ....

    return y;
}
```
return可以返回**变量值，常量，甚至函数本身**。
同时，return可以**结束函数**，一个函数中可以有多个return，先执行到哪个，函数就在哪里结束执行。

## 04 函数原型的参数问题
### （1）参数匹配
为解决函数定义中形式参数和函数调用时传递的实际参数的类型和数量不匹配的问题，ANSI C要求在函数声明时还要声明变量的类型。即使用**函数原型**来声明**函数的返回类型**、**参数的数量**和**每个参数的类型**。

可以采用以下两种函数原型：
```c
int imax(int, int);
int imax(int a, int b);
```
根据函数原型，在调用函数时，编译器可以检查函数调用是否与函数原型匹配。参数的数量是否正确？类型是否匹配？

若不正确，可能会导致数据丢失等错误。

### （2）无参数
若函数无需参数:
```c
void num();
```
+ 不支持ANSI C的编译器会**假定用户没有用函数原型声明函数**，正确应为``void num(void);``
+ 支持ANSI C的编译器会解释为**函数num无参数**，在函数调用时，编译器会检查确保没有实际参数。

### （3）未指定参数
若函数的参数数量和类型不定，ANSI C允许使用部分原型。...

## 05 函数原型的优点
函数原型，使得编译器在第1次执行到该函数之前就知道如何使用它。
因此，把整个函数定义放在第1次调用该函数**之前**，也有相同的效果。此时，**函数定义也相当于函数原型**。
```c
int imax(int a, int b)
{
    return a>b ? a : b;
}
int main()
{
    int a=7, b=8;
    printf("%d", imax(a, b));
    return 0;
}
```



