## 01 无缓冲
依然回到09 - 1中的程序中。
```c
#include <stdio.h>
int main()
{
    char c;
    while((c=getchar()) != '\n')
        putchar(c);

    return 0;
}
```
若在老式系统中运行，则输入文本中可能显示如下：
```c
XXiiaaoommii  HHyyppeerrOOSS  33
```
像这样**回显用户输入的字符后立即重复打印该字符是属于无缓冲（或直接）输入**。
即正在等待的程序可以**立即使用输入的字符**。
![09 - 2 - 1](/引用文件/09%20-%202%20-%201.png)

## 02 缓冲分类
缓冲分为两类：**完全缓冲I/O**和**行缓冲I/O**。
+ 完全缓冲指的是当缓冲区被填满时才刷新缓冲区（内容被发送到目的地），通常用于文件输入。
+ 行缓冲指的是在出现**换行符\n**时才刷新缓冲区。
>[!tip]
>键盘输入通常是行缓冲输入，所以在按下Enter键后才刷新缓冲区。

## 03 结束键盘输入
在上述代码中，当getchar读取到换行符便结束程序。
但有时我们不希望换行时结束程序，需要别的方式来结束键盘输入。
#### 文件，流和键盘输入
**文件**：存储器中存储信息的区域。
**流**：是一个实际输入或输出映射的理想化数据流。

#### EOF(End Of File)
在C语言中，用getchar()读取文件检测到文件结尾时会**返回一个特殊的值**，即**EOF**。scanf()同样。
通常，**EOF定义在stdio.h文件中**。
```c
#define EOF (-1)
```
getchar()函数的返回值通常介于（0~127或0~255）无论哪种情况，-1都不对应任何字符，所以该值可以用于标记文件结尾。某些系统也许把EOF定义为-1以外的值，但是定义的值一定与输入字符所产生的返回的值不同。
因此上述程序可以改成：
```c
#include <stdio.h>
int main()
{
    char c;
    while((c=getchar()) != EOF)
        putchar(c);

    return 0;
}
```
>[!important]
>（1）不用定义EOF，EOF已经在stdio.h中定义过了。
>（2）使用该程序进行键盘输入，要设法输入EOF字符。不能只输入EOF，也不能输入-1（会传入两个字符-和1）
>正确的方法是，必须找出当前系统的要求。例如UNIX和Linux系统中，Ctrl+D会传入文件结尾的信号。Windows则是Ctrl+Z
